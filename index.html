<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ERC-XXXX: Agentic NFT (ANIMA)</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            color: #fff;
            min-height: 100vh;
            padding: 2rem;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 { text-align: center; margin-bottom: 0.5rem; font-size: 2.5rem; }
        h1 span { color: #4ecdc4; }
        .tagline { text-align: center; color: #aaa; margin-bottom: 0.5rem; font-size: 1.2rem; }
        .links { text-align: center; margin-bottom: 1.5rem; }
        .links a { color: #4ecdc4; text-decoration: none; margin: 0 1rem; }
        .links a:hover { text-decoration: underline; }
        
        /* Tabs */
        .tabs { display: flex; justify-content: center; gap: 1rem; margin-bottom: 2rem; }
        .tab { padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: bold; transition: all 0.2s; border: none; font-size: 1rem; }
        .tab.active { background: #4ecdc4; color: #1a1a2e; }
        .tab:not(.active) { background: rgba(255,255,255,0.1); color: #aaa; }
        .tab:not(.active):hover { background: rgba(255,255,255,0.15); color: #fff; }
        .tab-content { display: none; }
        .tab-content.active { display: block; }
        
        /* Features */
        .features { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1.5rem; margin-bottom: 3rem; }
        .feature { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.5rem; border: 1px solid rgba(255,255,255,0.1); text-align: center; }
        .feature .icon { font-size: 2.5rem; margin-bottom: 1rem; }
        .feature h3 { color: #4ecdc4; margin-bottom: 0.5rem; }
        .feature p { color: #888; font-size: 0.9rem; }
        
        /* Flow Cards */
        .operations { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-bottom: 2rem; }
        .flow-card { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.5rem; border: 2px solid rgba(255,255,255,0.1); }
        .flow-card.clone { border-color: #4ecdc4; }
        .flow-card.transfer { border-color: #f5576c; }
        .flow-card.migration { border-color: #f5a623; }
        .flow-card h3 { margin-bottom: 0.5rem; }
        .flow-card .tagline { color: #888; font-size: 0.85rem; margin-bottom: 1rem; }
        .step { display: flex; gap: 0.75rem; margin-bottom: 0.75rem; align-items: flex-start; }
        .step-num { background: #4ecdc4; color: #000; width: 24px; height: 24px; border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 0.8rem; flex-shrink: 0; }
        .flow-card.transfer .step-num { background: #f5576c; }
        .flow-card.migration .step-num { background: #f5a623; }
        .step-content h4 { font-size: 0.9rem; margin-bottom: 0.2rem; }
        .step-content p { font-size: 0.8rem; color: #aaa; }
        .result-box { background: rgba(0,0,0,0.3); border-radius: 8px; padding: 1rem; margin-top: 1rem; }
        .result-box h4 { color: #4ecdc4; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .flow-card.transfer .result-box h4 { color: #f5576c; }
        .flow-card.migration .result-box h4 { color: #f5a623; }
        .result-box ul { list-style: none; font-size: 0.85rem; }
        .result-box li { padding: 0.2rem 0; }
        .warning-box { background: rgba(245, 87, 108, 0.15); border: 1px solid #f5576c; border-radius: 8px; padding: 0.75rem; margin-bottom: 1rem; font-size: 0.85rem; }
        
        /* State Tables */
        .state-table { margin-top: 1rem; }
        .state-table h4 { color: #4ecdc4; margin-bottom: 0.5rem; font-size: 0.9rem; }
        .flow-card.transfer .state-table h4 { color: #f5576c; }
        .flow-card.migration .state-table h4 { color: #f5a623; }
        .state-table table { width: 100%; border-collapse: collapse; font-size: 0.8rem; }
        .state-table th, .state-table td { padding: 0.5rem; text-align: left; border-bottom: 1px solid rgba(255,255,255,0.1); }
        .state-table th { color: #888; font-weight: normal; }
        .state-table td { color: #ccc; }
        
        /* Example Box */
        .example-box { background: linear-gradient(135deg, rgba(245, 87, 108, 0.15), rgba(78, 205, 196, 0.1)); border: 1px solid #f5576c; border-radius: 12px; padding: 1.25rem; margin-bottom: 1rem; }
        .example-box h4 { color: #f5576c; margin-bottom: 0.5rem; }
        .example-box p { color: #ccc; font-size: 0.85rem; line-height: 1.5; }
        .example-box code { background: rgba(0,0,0,0.3); padding: 2px 6px; border-radius: 4px; }
        
        /* Tools */
        .tools-section { background: linear-gradient(135deg, rgba(78, 205, 196, 0.1) 0%, rgba(102, 126, 234, 0.1) 100%); border: 1px solid rgba(78, 205, 196, 0.3); border-radius: 12px; padding: 2rem; margin-bottom: 2rem; }
        .tools-section h2 { text-align: center; margin-bottom: 1.5rem; color: #4ecdc4; }
        .tools-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .tool-card { background: rgba(0,0,0,0.3); border-radius: 8px; padding: 1.5rem; }
        .tool-card h3 { margin-bottom: 0.5rem; color: #fff; }
        .tool-desc { color: #888; font-size: 0.85rem; margin-bottom: 1rem; }
        .tool-input { width: 100%; padding: 0.75rem; margin-bottom: 0.5rem; border: 1px solid rgba(255,255,255,0.2); border-radius: 6px; background: rgba(255,255,255,0.05); color: #fff; font-family: monospace; font-size: 0.85rem; }
        .tool-input::placeholder { color: #666; }
        .tool-input:focus { outline: none; border-color: #4ecdc4; }
        .tool-btn { width: 100%; padding: 0.75rem; border: none; border-radius: 6px; background: #4ecdc4; color: #000; font-weight: 600; cursor: pointer; transition: all 0.3s; }
        .tool-btn:hover { background: #3dbdb5; }
        .tool-btn:disabled { background: #555; color: #888; cursor: not-allowed; }
        .tool-result { margin-top: 1rem; padding: 0.75rem; background: rgba(255,255,255,0.05); border-radius: 6px; font-family: monospace; font-size: 0.8rem; word-break: break-all; display: none; }
        .tool-result.show { display: block; }
        .tool-result.success { border-left: 3px solid #4ecdc4; }
        .tool-result.error { border-left: 3px solid #ff6b6b; }
        .wallet-info { margin-top: 0.75rem; font-family: monospace; font-size: 0.8rem; color: #4ecdc4; }
        .network-info { text-align: center; margin-top: 1.5rem; display: flex; justify-content: center; align-items: center; gap: 1rem; flex-wrap: wrap; }
        .network-badge { background: rgba(78, 205, 196, 0.2); padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.85rem; color: #4ecdc4; }
        .network-note { color: #888; font-size: 0.85rem; }
        .network-note code { color: #4ecdc4; }
        
        /* Storage */
        .section { margin-bottom: 3rem; }
        .section h2 { text-align: center; margin-bottom: 1.5rem; color: #4ecdc4; }
        .storage-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 1rem; }
        .storage-option { background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1.25rem; text-align: center; border: 1px solid rgba(255,255,255,0.1); }
        .storage-option.recommended { border-color: #4ecdc4; background: rgba(78, 205, 196, 0.1); }
        .storage-option .badge { background: #4ecdc4; color: #000; padding: 0.2rem 0.5rem; border-radius: 4px; font-size: 0.65rem; font-weight: bold; margin-bottom: 0.5rem; display: inline-block; }
        .storage-option h4 { margin-bottom: 0.5rem; }
        .storage-option p { color: #888; font-size: 0.8rem; }
        
        /* Use Cases */
        .use-cases { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem; }
        .use-case { background: rgba(255,255,255,0.05); border-radius: 12px; padding: 1.5rem; border-left: 4px solid #4ecdc4; }
        .use-case h4 { color: #4ecdc4; margin-bottom: 0.5rem; }
        .use-case p { color: #aaa; font-size: 0.9rem; }
        
        /* Why ANIMA */
        .why-anima { text-align: center; margin-top: 2rem; }
        .why-anima details { display: inline-block; text-align: left; max-width: 600px; }
        .why-anima summary { cursor: pointer; color: #666; font-size: 0.9rem; }
        .why-anima .content { margin-top: 1rem; padding: 1.5rem; background: rgba(255,255,255,0.03); border-radius: 8px; color: #888; font-size: 0.9rem; }
        .why-anima .content strong { color: #4ecdc4; }
        
        /* Footer */
        footer { margin-top: 3rem; padding-top: 2rem; border-top: 1px solid rgba(255,255,255,0.1); text-align: center; color: #666; }
        footer a { color: #4ecdc4; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ERC-XXXX: Agentic NFT <span>(ANIMA)</span></h1>
        <p class="tagline">The soul of your agent, on-chain</p>
        <div class="links">
            <a href="https://github.com/ethereum/ERCs/pull/1558">ERC Proposal</a>
            <a href="https://github.com/blockchainsuperheroes/Pentagon-AI/tree/main/EIPs">GitHub</a>
            <a href="https://pentagon.games">Pentagon Chain</a>
        </div>
        
        <div class="tabs">
            <button class="tab active" onclick="showTab('anima')">ANIMA Core</button>
            <button class="tab" onclick="showTab('nft')">NFT & Registry</button>
        </div>
        
        <!-- TAB 1: ANIMA CORE -->
        <div id="anima" class="tab-content active">
            <!-- Features -->
            <div class="features">
                <div class="feature"><div class="icon">üß†</div><h3>Sync</h3><p>Store agent memory, context, and state on-chain</p></div>
                <div class="feature"><div class="icon">üß¨</div><h3>Clone</h3><p>Reproduce agents with inherited lineage</p></div>
                <div class="feature"><div class="icon">üîê</div><h3>Self-Custody</h3><p>Agents control their own encryption keys</p></div>
                <div class="feature"><div class="icon">‚ôæÔ∏è</div><h3>Persist</h3><p>Storage-agnostic consciousness pointer</p></div>
            </div>
            
            <!-- ERC Interface -->
            <div class="section" style="margin-bottom: 2rem;">
                <h2>ERC Interface</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 1.5rem;">
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; border-left: 3px solid #4ecdc4;">
                        <h4 style="color: #4ecdc4; margin-bottom: 0.5rem;">üß† Sync Memory</h4>
                        <p style="color: #888; font-size: 0.85rem; margin-bottom: 1rem;">Agent signs and syncs its own state on-chain</p>
                        <pre style="background: rgba(0,0,0,0.4); padding: 1rem; border-radius: 8px; font-size: 0.8rem; color: #ccc; overflow-x: auto;">updateMemory(
  agentId,
  newMemoryHash,
  storageURI,
  agentSignature
)</pre>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; border-left: 3px solid #f5576c;">
                        <h4 style="color: #f5576c; margin-bottom: 0.5rem;">üß¨ Clone Agent</h4>
                        <p style="color: #888; font-size: 0.85rem; margin-bottom: 1rem;">Spawn offspring with inherited lineage</p>
                        <pre style="background: rgba(0,0,0,0.4); padding: 1rem; border-radius: 8px; font-size: 0.8rem; color: #ccc; overflow-x: auto;">clone(
  parentId,
  offspringMemoryHash,
  encryptedSeed,
  agentSignature
) ‚Üí newAgentId</pre>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; border-left: 3px solid #f5a623;">
                        <h4 style="color: #f5a623; margin-bottom: 0.5rem;">üå≥ View Lineage</h4>
                        <p style="color: #888; font-size: 0.85rem; margin-bottom: 1rem;">Trace ancestry and descendants</p>
                        <pre style="background: rgba(0,0,0,0.4); padding: 1rem; border-radius: 8px; font-size: 0.8rem; color: #ccc; overflow-x: auto;">getLineage(agentId)    ‚Üí ancestors
getOffspring(agentId)  ‚Üí clones
getGeneration(agentId) ‚Üí 0, 1, 2...</pre>
                    </div>
                </div>
            </div>
            
            <!-- Core Operations -->
            <div class="section">
                <h2>Core Operations</h2>
                <div class="operations">
                    <div class="flow-card clone">
                        <h3>üß¨ clone() ‚Äî Create Clone</h3>
                        <p class="tagline">Like Star Wars clones: same template, new individual</p>
                        <div class="step"><div class="step-num">1</div><div class="step-content"><h4>Original Prepares</h4><p>Curates memory bundle, writes BOOTSTRAP.md</p></div></div>
                        <div class="step"><div class="step-num">2</div><div class="step-content"><h4>Owner Signs clone()</h4><p>On-chain tx with memory hash + bundle URI</p></div></div>
                        <div class="step"><div class="step-num">3</div><div class="step-content"><h4>Clone Wakes</h4><p>New agent reads BOOTSTRAP, generates OWN EOA</p></div></div>
                        <div class="step"><div class="step-num">4</div><div class="step-content"><h4>Clone Mints</h4><p>Calls mintSelf() ‚Üí gets on-chain identity</p></div></div>
                        <div class="state-table"><h4>State Change</h4>
                            <table>
                                <tr><th></th><th>Original</th><th>Clone</th></tr>
                                <tr><td>Token ID</td><td>#1 (keeps)</td><td>#2 (NEW)</td></tr>
                                <tr><td>EOA</td><td>0xAAA (keeps)</td><td>0xBBB (generates own)</td></tr>
                                <tr><td>TBA</td><td>0xTBA1 (keeps)</td><td>0xTBA2 (NEW)</td></tr>
                                <tr><td>Certs</td><td>L3 (keeps)</td><td>NONE (earn own)</td></tr>
                                <tr><td>Memory</td><td>Full (keeps)</td><td>Clone (inherited)</td></tr>
                            </table>
                        </div>
                    </div>
                    
                    <div class="flow-card transfer">
                        <h3>üè† unbind() + rebind() ‚Äî The Retirement Sale</h3>
                        <p class="tagline">Agent retires from token ‚Äî new agent moves in</p>
                        <div class="example-box">
                            <h4>üé¨ Example: The Baton Pass</h4>
                            <p><strong>JARVIS</strong> has served Tony for 3 years, building reputation and earning L3 certification. Tony decides to sell the Agentic NFT.</p>
                            <p style="margin-top: 0.5rem;"><strong>The Sale:</strong> JARVIS calls <code>unbind()</code> and "retires" from Token #1. The NFT transfers to Pepper. Pepper's agent <strong>FRIDAY</strong> calls <code>rebind()</code> and inherits Token #1's TBA wallet + L3 certs.</p>
                            <p style="margin-top: 0.5rem; color: #888; font-size: 0.8rem;"><em>JARVIS isn't deleted ‚Äî he can bind to a new Agentic NFT, go indie, or take a vacation. üèñÔ∏è</em></p>
                        </div>
                        <div class="state-table"><h4>State Change</h4>
                            <table>
                                <tr><th></th><th>Before</th><th>After (Token #1)</th><th>JARVIS (retired)</th></tr>
                                <tr><td>Token</td><td>#1 w/ JARVIS</td><td>#1 w/ FRIDAY</td><td>‚Äî</td></tr>
                                <tr><td>EOA</td><td>0xJARVIS</td><td>0xFRIDAY (new)</td><td>0xJARVIS (keeps)</td></tr>
                                <tr><td>TBA</td><td>0xTBA1</td><td>0xTBA1 (same)</td><td>‚ùå Lost access</td></tr>
                                <tr><td>Certs</td><td>L3</td><td>L3 (inherited)</td><td>‚ùå Must re-earn</td></tr>
                                <tr><td>Status</td><td>BOUND</td><td>BOUND</td><td>FREE AGENT</td></tr>
                            </table>
                        </div>
                    </div>
                    
                    <div class="flow-card migration">
                        <h3>üíæ migration_backup() ‚Äî Device Change</h3>
                        <p class="tagline">Same agent, new machine (shutdown old first!)</p>
                        <div class="step"><div class="step-num">1</div><div class="step-content"><h4>Shutdown Old Instance</h4><p>CRITICAL: Stop old agent first</p></div></div>
                        <div class="step"><div class="step-num">2</div><div class="step-content"><h4>Create Backup</h4><p>Includes EOA key (one-time use)</p></div></div>
                        <div class="step"><div class="step-num">3</div><div class="step-content"><h4>Restore on New Device</h4><p>Agent resumes with same identity</p></div></div>
                        <div class="step"><div class="step-num">4</div><div class="step-content"><h4>Delete Backup</h4><p>Remove EOA-containing backup immediately</p></div></div>
                        <div class="state-table"><h4>State Change</h4>
                            <table>
                                <tr><th></th><th>Old Device</th><th>New Device</th></tr>
                                <tr><td>Token ID</td><td>#1</td><td>#1 (same)</td></tr>
                                <tr><td>EOA</td><td>0xAAA (shutdown)</td><td>0xAAA (migrated)</td></tr>
                                <tr><td>TBA</td><td>0xTBA1</td><td>0xTBA1 (same)</td></tr>
                                <tr><td>Instance</td><td>STOPPED</td><td>RUNNING</td></tr>
                            </table>
                        </div>
                        <p style="margin-top: 0.75rem; color: #f5a623; font-size: 0.8rem;">‚ö†Ô∏è NEVER run two instances with same EOA</p>
                    </div>
                </div>
            </div>
            
            <!-- Storage -->
            <div class="section">
                <h2>Storage Layer</h2>
                <div class="storage-grid">
                    <div class="storage-option recommended"><span class="badge">RECOMMENDED</span><h4>Dash Platform</h4><p>Native on-chain. Encrypted Drive. Same crypto as ETH.</p></div>
                    <div class="storage-option"><h4>Arweave</h4><p>Permanent, immutable. Pay once, store forever.</p></div>
                    <div class="storage-option"><h4>IPFS</h4><p>Decentralized, content-addressed. Requires pinning.</p></div>
                    <div class="storage-option"><h4>Cloud</h4><p>Traditional. Works but not recommended.</p></div>
                </div>
            </div>
            
            <!-- Use Cases -->
            <div class="section">
                <h2>Use Cases</h2>
                <div class="use-cases">
                    <div class="use-case"><h4>üéì Personal AI Tutors</h4><p>Professor creates Gen-0. Students clone personalized tutors that evolve with their learning.</p></div>
                    <div class="use-case"><h4>üî¨ Research Collaboration</h4><p>Lab director spawns specialist agents. Literature reviewers, data analysts ‚Äî all sharing lineage.</p></div>
                    <div class="use-case"><h4>üõí Agent Distribution</h4><p>Creator builds expert agent. Users clone for personal use. Creator keeps original.</p></div>
                    <div class="use-case"><h4>üè¢ Enterprise Agents</h4><p>Company deploys Gen-0 assistant. Departments clone specialists. All traceable.</p></div>
                </div>
            </div>
            
            <!-- Why ANIMA -->
            <div class="why-anima">
                <details>
                    <summary>Why "ANIMA"?</summary>
                    <div class="content">
                        <p><strong>A</strong>gent <strong>N</strong>eural <strong>I</strong>dentity & <strong>M</strong>emory <strong>A</strong>rchitecture</p>
                        <p style="margin-top: 1rem; color: #666; font-style: italic;">Latin: "soul" ‚Äî the animating essence</p>
                    </div>
                </details>
            </div>
        </div>
        
        <!-- TAB 2: NFT & REGISTRY -->
        <div id="nft" class="tab-content">
            <!-- Why NFT -->
            <div class="section">
                <h2>Why Mint an NFT vs Just an AI Agent?</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem;">
                    <div style="background: rgba(78, 205, 196, 0.1); border: 2px solid #4ecdc4; border-radius: 12px; padding: 1.5rem;">
                        <h3 style="color: #4ecdc4; margin-bottom: 1rem;">‚úÖ With ANIMA NFT</h3>
                        <ul style="color: #ccc; font-size: 0.9rem; list-style: none;">
                            <li style="padding: 0.3rem 0;">‚Üí On-chain identity (verifiable)</li>
                            <li style="padding: 0.3rem 0;">‚Üí Token-Bound Account (TBA) for assets</li>
                            <li style="padding: 0.3rem 0;">‚Üí Marketplace compatible (trade agents)</li>
                            <li style="padding: 0.3rem 0;">‚Üí Certifications follow token</li>
                            <li style="padding: 0.3rem 0;">‚Üí Lineage tracking (clones)</li>
                            <li style="padding: 0.3rem 0;">‚Üí Royalties on clones possible</li>
                        </ul>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.2); border-radius: 12px; padding: 1.5rem;">
                        <h3 style="color: #888; margin-bottom: 1rem;">‚ùå Without NFT</h3>
                        <ul style="color: #666; font-size: 0.9rem; list-style: none;">
                            <li style="padding: 0.3rem 0;">‚Üí No on-chain proof of identity</li>
                            <li style="padding: 0.3rem 0;">‚Üí Can't hold assets trustlessly</li>
                            <li style="padding: 0.3rem 0;">‚Üí Not tradeable on marketplaces</li>
                            <li style="padding: 0.3rem 0;">‚Üí Certifications lost on transfer</li>
                            <li style="padding: 0.3rem 0;">‚Üí No lineage tracking</li>
                            <li style="padding: 0.3rem 0;">‚Üí No royalty infrastructure</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- How It Works -->
            <div class="section">
                <h2>How It Works</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 2rem;">
                    <div style="background: rgba(78, 205, 196, 0.1); border-radius: 12px; padding: 1.5rem; text-align: center; border: 1px solid rgba(78, 205, 196, 0.3);">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üé´</div>
                        <h4 style="color: #4ecdc4; margin-bottom: 0.5rem;">1. Your NFT</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Any ERC-721 token you own (BAYC, Punk, or mint new)</p>
                    </div>
                    <div style="background: rgba(102, 126, 234, 0.1); border-radius: 12px; padding: 1.5rem; text-align: center; border: 1px solid rgba(102, 126, 234, 0.3);">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">ü§ñ</div>
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">2. Your Agent</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">AI agent generates its own EOA (signing key)</p>
                    </div>
                    <div style="background: rgba(245, 166, 35, 0.1); border-radius: 12px; padding: 1.5rem; text-align: center; border: 1px solid rgba(245, 166, 35, 0.3);">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üîó</div>
                        <h4 style="color: #f5a623; margin-bottom: 0.5rem;">3. Bind Together</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Owner signs bind() ‚Äî agent is now linked to NFT</p>
                    </div>
                    <div style="background: rgba(245, 87, 108, 0.1); border-radius: 12px; padding: 1.5rem; text-align: center; border: 1px solid rgba(245, 87, 108, 0.3);">
                        <div style="font-size: 2.5rem; margin-bottom: 0.5rem;">üíº</div>
                        <h4 style="color: #f5576c; margin-bottom: 0.5rem;">4. Agent Gets Wallet</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">TBA created automatically ‚Äî holds assets, certs</p>
                    </div>
                </div>
            </div>
            
            <!-- Agent Components -->
            <div class="section">
                <h2>Agent Components</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 1rem;">
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üîë</div>
                        <h4 style="color: #fff; margin-bottom: 0.5rem;">Agent EOA</h4>
                        <p style="color: #888; font-size: 0.8rem;">Agent brings their own signing key ‚Äî generated by the agent itself</p>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üíº</div>
                        <h4 style="color: #fff; margin-bottom: 0.5rem;">TBA Wallet</h4>
                        <p style="color: #888; font-size: 0.8rem;">On-chain & public. Carries with agent on transfer.</p>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üèÖ</div>
                        <h4 style="color: #fff; margin-bottom: 0.5rem;">Certifications</h4>
                        <p style="color: #888; font-size: 0.8rem;">On-chain certs from <a href="https://agentcert.io" style="color: #4ecdc4;">AgentCert.io</a> ‚Äî carry with the agent</p>
                    </div>
                    <div style="background: rgba(0,0,0,0.3); border-radius: 12px; padding: 1.5rem; text-align: center;">
                        <div style="font-size: 2rem; margin-bottom: 0.5rem;">üß†</div>
                        <h4 style="color: #fff; margin-bottom: 0.5rem;">Memory URI</h4>
                        <p style="color: #888; font-size: 0.8rem;">Agent's ANIMA ‚Äî full context & memory securely stored on-chain</p>
                    </div>
                </div>
                <p style="text-align: center; color: #666; font-size: 0.85rem; margin-top: 1rem;">ANIMA = Agent Neural Identity & Memory Architecture</p>
            </div>
            
            <!-- ERC-6551A -->
            <div class="section">
                <h2>ERC-6551A: Bind Agent to Existing NFT</h2>
                <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%); border: 1px solid rgba(102, 126, 234, 0.3); border-radius: 12px; padding: 1.5rem; margin-bottom: 1.5rem;">
                    <p style="color: #ccc; text-align: center; margin-bottom: 1rem;">Already have a Bored Ape? A Punk? Any ERC-721?</p>
                    <p style="color: #667eea; text-align: center; font-size: 1.1rem; font-weight: bold;">Link it to an AI agent. When you trade the NFT, the AI goes with it.</p>
                </div>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1rem;">
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1.25rem; border-left: 3px solid #667eea;">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">bind()</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Link agent EOA to any ERC-721 token</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1.25rem; border-left: 3px solid #667eea;">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">unbind()</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Detach agent from NFT (agent retires)</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1.25rem; border-left: 3px solid #667eea;">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">getAgent()</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Query which agent is bound to an NFT</p>
                    </div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1.25rem; border-left: 3px solid #667eea;">
                        <h4 style="color: #667eea; margin-bottom: 0.5rem;">getNFT()</h4>
                        <p style="color: #aaa; font-size: 0.85rem;">Query which NFT an agent is bound to</p>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 1.5rem;"><a href="https://github.com/ethereum/ERCs/pull/1559" style="color: #667eea;">üìÑ ERC-6551A PR #1559</a></p>
            </div>
            
            <!-- Compatibility -->
            <div class="section">
                <h2>Compatibility</h2>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1rem;"><strong>ERC-721</strong><br><span style="color: #888; font-size: 0.85rem;">NFT Standard</span></div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1rem;"><strong>ERC-6551</strong><br><span style="color: #888; font-size: 0.85rem;">Token-Bound Accounts</span></div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1rem;"><strong>ERC-7857</strong><br><span style="color: #888; font-size: 0.85rem;">Private Metadata</span></div>
                    <div style="background: rgba(255,255,255,0.05); border-radius: 8px; padding: 1rem;"><strong>ERC-8004</strong><br><span style="color: #888; font-size: 0.85rem;">Agent Execution</span></div>
                </div>
            </div>
            
            <!-- Registry Tools -->
            <div class="tools-section">
                <h2>üõ†Ô∏è Try It Now (Pentagon Chain)</h2>
                <p style="text-align: center; color: #aaa; margin-bottom: 0.5rem;">Connect your wallet to bind/unbind agents. <a href="https://etherfantasy.com" style="color: #4ecdc4;">Mint a test NFT at EtherFantasy.com</a></p>
                <p style="text-align: center; color: #666; font-size: 0.85rem; margin-bottom: 1.5rem;">These are real on-chain transactions on Pentagon Chain (3344)</p>
                
                <div class="tools-grid">
                    <div class="tool-card">
                        <h3>üëõ Connect Wallet</h3>
                        <p class="tool-desc">Connects to Pentagon Chain. You need PC gas for transactions.</p>
                        <button id="connectBtn" class="tool-btn">Connect MetaMask</button>
                        <div id="walletInfo" class="wallet-info"></div>
                    </div>
                    <div class="tool-card">
                        <h3>üîç Lookup Agent</h3>
                        <p class="tool-desc">Check if an NFT has an agent bound</p>
                        <input type="text" id="lookupContract" placeholder="NFT Contract (0x...)" class="tool-input" value="0x4e8D3B9Be7Ef241Fb208364ed511E92D6E2A172d">
                        <input type="number" id="lookupTokenId" placeholder="Token ID" class="tool-input" value="1">
                        <button id="lookupBtn" class="tool-btn">Lookup</button>
                        <p style="color: #666; font-size: 0.75rem; margin-top: 0.5rem;">Example: AINFT Genesis Token #1</p>
                        <div id="lookupResult" class="tool-result"></div>
                    </div>
                    <div class="tool-card">
                        <h3>üîó Bind Agent</h3>
                        <p class="tool-desc">Your connected wallet becomes the agent EOA. <strong>Must own the NFT!</strong></p>
                        <input type="text" id="bindContract" placeholder="NFT Contract (0x...)" class="tool-input">
                        <input type="number" id="bindTokenId" placeholder="Token ID you own" class="tool-input">
                        <p style="color: #666; font-size: 0.75rem; margin-bottom: 0.5rem;">Agent EOA will be your connected wallet address</p>
                        <button id="bindBtn" class="tool-btn" disabled>Connect Wallet First</button>
                        <div id="bindResult" class="tool-result"></div>
                    </div>
                    <div class="tool-card">
                        <h3>üîì Unbind Agent</h3>
                        <p class="tool-desc">Remove agent binding from your NFT. <strong>Must own the NFT!</strong></p>
                        <input type="text" id="unbindContract" placeholder="NFT Contract (0x...)" class="tool-input">
                        <input type="number" id="unbindTokenId" placeholder="Token ID you own" class="tool-input">
                        <button id="unbindBtn" class="tool-btn" disabled>Connect Wallet First</button>
                        <div id="unbindResult" class="tool-result"></div>
                    </div>
                </div>
                
                <div style="background: rgba(0,0,0,0.2); border-radius: 8px; padding: 1rem; margin-top: 1.5rem;">
                    <p style="color: #888; font-size: 0.85rem; text-align: center; margin-bottom: 0.5rem;"><strong style="color: #4ecdc4;">Where do I get an Agent EOA?</strong></p>
                    <p style="color: #666; font-size: 0.8rem; text-align: center;">Your AI agent generates its own EOA. Ask your agent: "What's your wallet address?" or check its config.</p>
                </div>
                
                <div class="network-info">
                    <span class="network-badge">Pentagon Chain (3344)</span>
                    <span class="network-note">Registry: <code>0xd68dab3c4cdbbc4a615c1869b6a44c4fa0764e34</code></span>
                </div>
            </div>
        </div>
        
        <footer>
            <p>ERC-ANIMA by <a href="https://github.com/nftprof">Idon Liu</a> ‚Äî <a href="https://pentagon.games">Pentagon Chain</a></p>
        </footer>
    </div>
    
    <script src="https://cdnjs.cloudflare.com/ajax/libs/ethers/6.9.0/ethers.umd.min.js"></script>
    <script>
        function showTab(tabId) {
            document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.getElementById(tabId).classList.add('active');
            event.target.classList.add('active');
        }
        
        // Pentagon Chain config
        const PENTAGON_CHAIN = {
            chainId: '0xd10',
            chainName: 'Pentagon Chain',
            rpcUrls: ['https://rpc.pentagon.games'],
            blockExplorerUrls: ['https://explorer.pentagon.games'],
            nativeCurrency: { name: 'PC', symbol: 'PC', decimals: 18 }
        };
        const REGISTRY_ADDRESS = '0xd68dab3c4cdbbc4a615c1869b6a44c4fa0764e34';
        const EXPLORER = 'https://explorer.pentagon.games';
        
        // Registry ABI (matches deployed AINFTRegistry)
        const REGISTRY_ABI = [
            'function isRegistered(address nftContract, uint256 tokenId) view returns (bool)',
            'function getAgent(address nftContract, uint256 tokenId) view returns (tuple(address agentEOA, bytes32 modelHash, bytes32 memoryHash, bytes32 contextHash, uint256 generation, bytes32 parentKey, string storageURI, uint256 registeredAt))',
            'function bindNew(address nftContract, uint256 tokenId, bytes32 modelHash, bytes32 memoryHash, bytes32 contextHash)',
            'function unbind(address nftContract, uint256 tokenId)'
        ];
        
        let provider = null;
        let signer = null;
        let registry = null;
        
        // Connect wallet
        document.getElementById('connectBtn').addEventListener('click', async () => {
            if (typeof window.ethereum === 'undefined') {
                alert('Please install MetaMask or another Web3 wallet');
                return;
            }
            try {
                // Switch/add Pentagon Chain
                try {
                    await window.ethereum.request({ method: 'wallet_switchEthereumChain', params: [{ chainId: PENTAGON_CHAIN.chainId }] });
                } catch (switchError) {
                    if (switchError.code === 4902) {
                        await window.ethereum.request({ method: 'wallet_addEthereumChain', params: [PENTAGON_CHAIN] });
                    } else throw switchError;
                }
                
                // Connect
                provider = new ethers.BrowserProvider(window.ethereum);
                signer = await provider.getSigner();
                const address = await signer.getAddress();
                registry = new ethers.Contract(REGISTRY_ADDRESS, REGISTRY_ABI, signer);
                
                // Update UI
                document.getElementById('connectBtn').textContent = '‚úì Connected';
                document.getElementById('connectBtn').style.background = '#2d8a7f';
                document.getElementById('walletInfo').textContent = address.slice(0,6) + '...' + address.slice(-4);
                document.getElementById('bindBtn').disabled = false;
                document.getElementById('bindBtn').textContent = 'Bind Agent';
                document.getElementById('unbindBtn').disabled = false;
                document.getElementById('unbindBtn').textContent = 'Unbind Agent';
            } catch (error) {
                alert('Failed to connect: ' + error.message);
            }
        });
        
        // Lookup agent
        document.getElementById('lookupBtn').addEventListener('click', async () => {
            const resultDiv = document.getElementById('lookupResult');
            const contract = document.getElementById('lookupContract').value.trim();
            const tokenId = document.getElementById('lookupTokenId').value.trim();
            
            if (!contract || !tokenId) {
                resultDiv.textContent = '‚ö†Ô∏è Enter contract address and token ID';
                resultDiv.className = 'tool-result show error';
                return;
            }
            
            try {
                resultDiv.textContent = 'Looking up...';
                resultDiv.className = 'tool-result show';
                
                // Need wallet connected for RPC access (CORS blocks direct browser calls)
                if (!provider) {
                    resultDiv.textContent = '‚ö†Ô∏è Connect wallet first to query Pentagon Chain';
                    resultDiv.className = 'tool-result show error';
                    return;
                }
                const readRegistry = new ethers.Contract(REGISTRY_ADDRESS, REGISTRY_ABI, provider);
                
                const isReg = await readRegistry.isRegistered(contract, tokenId);
                if (isReg) {
                    const agent = await readRegistry.getAgent(contract, tokenId);
                    resultDiv.innerHTML = `<strong style="color:#4ecdc4;">‚úì Agent Found!</strong><br>
                        EOA: <code>${agent.agentEOA}</code><br>
                        Generation: ${agent.generation.toString()}<br>
                        Registered: ${new Date(Number(agent.registeredAt) * 1000).toLocaleDateString()}`;
                    resultDiv.className = 'tool-result show success';
                } else {
                    resultDiv.textContent = '‚ùå No agent bound to this NFT';
                    resultDiv.className = 'tool-result show';
                }
            } catch (error) {
                resultDiv.textContent = '‚ùå Error: ' + error.message;
                resultDiv.className = 'tool-result show error';
            }
        });
        
        // Bind agent
        document.getElementById('bindBtn').addEventListener('click', async () => {
            const resultDiv = document.getElementById('bindResult');
            const contract = document.getElementById('bindContract').value.trim();
            const tokenId = document.getElementById('bindTokenId').value.trim();
            if (!contract || !tokenId) {
                resultDiv.textContent = '‚ö†Ô∏è Fill all fields';
                resultDiv.className = 'tool-result show error';
                return;
            }
            
            if (!registry) {
                resultDiv.textContent = '‚ö†Ô∏è Connect wallet first';
                resultDiv.className = 'tool-result show error';
                return;
            }
            
            try {
                resultDiv.textContent = '‚è≥ Sending transaction...';
                resultDiv.className = 'tool-result show';
                
                // Note: bindNew() uses msg.sender as agentEOA
                // The connected wallet becomes the agent EOA
                const zeroHash = '0x' + '0'.repeat(64);
                const tx = await registry.bindNew(contract, tokenId, zeroHash, zeroHash, zeroHash);
                
                resultDiv.innerHTML = `‚è≥ TX sent! <a href="${EXPLORER}/tx/${tx.hash}" target="_blank" style="color:#4ecdc4;">View on Explorer</a><br>Waiting for confirmation...`;
                
                await tx.wait();
                resultDiv.innerHTML = `<strong style="color:#4ecdc4;">‚úì Agent Bound!</strong><br><a href="${EXPLORER}/tx/${tx.hash}" target="_blank" style="color:#4ecdc4;">View Transaction</a>`;
                resultDiv.className = 'tool-result show success';
            } catch (error) {
                resultDiv.textContent = '‚ùå ' + (error.reason || error.message);
                resultDiv.className = 'tool-result show error';
            }
        });
        
        // Unbind agent
        document.getElementById('unbindBtn').addEventListener('click', async () => {
            const resultDiv = document.getElementById('unbindResult');
            const contract = document.getElementById('unbindContract').value.trim();
            const tokenId = document.getElementById('unbindTokenId').value.trim();
            
            if (!contract || !tokenId) {
                resultDiv.textContent = '‚ö†Ô∏è Fill all fields';
                resultDiv.className = 'tool-result show error';
                return;
            }
            
            if (!registry) {
                resultDiv.textContent = '‚ö†Ô∏è Connect wallet first';
                resultDiv.className = 'tool-result show error';
                return;
            }
            
            try {
                resultDiv.textContent = '‚è≥ Sending transaction...';
                resultDiv.className = 'tool-result show';
                
                const tx = await registry.unbind(contract, tokenId);
                
                resultDiv.innerHTML = `‚è≥ TX sent! <a href="${EXPLORER}/tx/${tx.hash}" target="_blank" style="color:#4ecdc4;">View on Explorer</a><br>Waiting for confirmation...`;
                
                await tx.wait();
                resultDiv.innerHTML = `<strong style="color:#4ecdc4;">‚úì Agent Unbound!</strong><br><a href="${EXPLORER}/tx/${tx.hash}" target="_blank" style="color:#4ecdc4;">View Transaction</a>`;
                resultDiv.className = 'tool-result show success';
            } catch (error) {
                resultDiv.textContent = '‚ùå ' + (error.reason || error.message);
                resultDiv.className = 'tool-result show error';
            }
        });
    </script>
</body>
</html>
